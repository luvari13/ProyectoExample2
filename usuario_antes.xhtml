<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui">
 
<ui:composition template="/WEB-INF/plantillas/plantillaMaterial.xhtml">
	<ui:define name="title">
		<h:outputText value="Mantenimiento de Usuarios" />
	</ui:define>
	<ui:define name="content">
		<button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="inferior">
								  <i class="material-icons">add</i>
								</button>
		<h:form id="form"> 
		
			<div class="ui-g">
				    <div class="ui-g-12 ui-lg-6">
				    	<p class="titulo1">Mantenimiento de Usuarios</p>
				    </div>
				    <div class="ui-g-12 ui-lg-6">
				    	<center>		
							<p:messages id="msgMensajesConsolidadoGlobal" closable="true" escape="false" showDetail="false" />					
						</center>
				    </div>
			</div>
			
			<p:layout style="min-width:400px;min-height:35px; height:65px; margin-bottom:10px;">
			    <p:layoutUnit position="center">
			    	<div class="ui-g">
						    <div class="ui-g-12 ui-lg-2">
						    	<p:selectOneMenu  value="#{usuarioBean.tipoBus}" style="width:125px">
					            <f:selectItem itemLabel="USUARIO" itemValue="USUARIO" />
					            <f:selectItem itemLabel="APELLIDOS" itemValue="APELLIDOS" />
					          </p:selectOneMenu>
						    </div>
						     <div class="ui-g-12 ui-lg-4">
						    	<p:inputText value="#{usuarioBean.valBus}" />
						    </div>
						    <div class="ui-g-12 ui-lg-6">
						    	<p:commandButton action="#{usuarioBean.selectedEditar}" value="Editar Usuario" update=":form" icon="ui-icon-pencil" title="Editar Registro" style="margin-left:10px; height:35px;" />
							    <p:commandButton action="#{usuarioBean.selectedEliminar}" value="Eliminar Usuario" icon="ui-icon-close" title="Nuevo Registro" style="margin-left:10px; height:35px;" />
							    <p:commandButton action="#{usuarioBean.selectedNuevo}" value="Nuevo Usuario"  icon="ui-icon-document" title="Nuevo Registro" style="margin-left:10px; height:35px;" />
						    </div>
					</div>
			    </p:layoutUnit>
			</p:layout>
	
			 <p:dataTable var="row" value="#{usuarioBean.usuarios}" rowIndexVar="rowIndex" paginator="true" rows="20" selectionMode="single" selection="#{usuarioBean.selectedUsuario}" rowKey="#{row.codusuario}" style="margin-top:10px;">
			    <p:column headerText="NÂ°" width="30" style="text-align:center">
			        <h:outputText value="#{rowIndex+1}" />
			    </p:column>
			    
			    <p:column headerText="USUARIO" width="80">
			        <h:outputText value="#{row.codusuario}" />
			    </p:column>
			 
			    <p:column headerText="APELLIDOS Y NOMBRES"  width="350">
			        <h:outputText value="#{row.apepat} #{row.apemat} #{row.nombres}" />
			    </p:column>
			    
			    <p:column headerText="DNI" width="70" style="text-align:center">
			        <h:outputText value="#{row.codpersonal}" />
			    </p:column>
			    
			    <p:column headerText="PERFIL" width="150">
			        <h:outputText value="#{row.perfil}" />
			    </p:column>
			 
			    <p:column headerText="Estado" width="70" style="text-align:center">
			        <h:outputText value="#{row.estado.equals('A') ? 'ACTIVO' : 'DE BAJA'}"  />
			    </p:column>
			 
			    <p:column headerText="Usu.Reg" width="70" style="text-align:center">
			        <h:outputText value="#{row.usureg}" />
			    </p:column>
			    
			    <p:column headerText="Fecha.Reg" width="90" style="text-align:center">
			        <h:outputText value="#{funcionesFechasBean.getFormatDate(row.fechreg)}" />
			    </p:column>
			    <p:column headerText="">
			    </p:column>
			</p:dataTable>
			
	 		
		</h:form>	
	</ui:define>
 
</ui:composition>
</html>